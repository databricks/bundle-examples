[
  {
    "source": "bronze.customer",
    "destination": "customer",
    "primary_keys": ["c_custkey"],
    "description": "Cleaned customer dimension table",
    "tags": ["dimension", "tpch", "cleaned"],
    "expectations_drop_row": {
      "valid_phone": "c_phone IS NOT NULL AND LENGTH(c_phone) > 0",
      "valid_acctbal": "c_acctbal IS NOT NULL"
    },
    "expectations_warn": {
      "valid_mktsegment": "c_mktsegment IN ('AUTOMOBILE', 'BUILDING', 'FURNITURE', 'HOUSEHOLD', 'MACHINERY')"
    },
    "expectations_fail_update": {
      "has_rows": "COUNT(*) > 0"
    }
  },
  {
    "source": "bronze.lineitem",
    "destination": "lineitem",
    "primary_keys": ["l_orderkey", "l_linenumber"],
    "description": "Cleaned line item fact table",
    "tags": ["fact", "tpch", "cleaned"],
    "expectations_drop_row": {
      "positive_quantity": "l_quantity > 0",
      "positive_extendedprice": "l_extendedprice > 0"
    },
    "expectations_fail_update": {
      "valid_discount": "l_discount >= 0 AND l_discount <= 1",
      "valid_tax": "l_tax >= 0",
      "has_rows": "COUNT(*) > 0"
    },
    "expectations_warn": {
      "valid_dates": "l_shipdate >= l_commitdate"
    }
  },
  {
    "source": "bronze.orders",
    "destination": "orders",
    "primary_keys": ["o_orderkey"],
    "description": "Cleaned orders fact table",
    "tags": ["fact", "tpch", "cleaned"],
    "expectations_drop_row": {
      "positive_totalprice": "o_totalprice > 0"
    },
    "expectations_warn": {
      "valid_orderstatus": "o_orderstatus IN ('O', 'F', 'P')",
      "valid_orderpriority": "o_orderpriority IN ('1-URGENT', '2-HIGH', '3-MEDIUM', '4-NOT SPECIFIED', '5-LOW')"
    },
    "expectations_fail_update": {
      "has_rows": "COUNT(*) > 0"
    }
  },
  {
    "source": "bronze.nation",
    "destination": "nation",
    "primary_keys": ["n_nationkey"],
    "description": "Cleaned nation dimension table",
    "tags": ["dimension", "tpch", "cleaned"],
    "expectations_drop_row": {
      "valid_name": "n_name IS NOT NULL AND LENGTH(n_name) > 0",
      "valid_regionkey": "n_regionkey IS NOT NULL"
    },
    "expectations_fail_update": {
      "has_rows": "COUNT(*) > 0"
    }
  },
  {
    "source": "bronze.part",
    "destination": "part",
    "primary_keys": ["p_partkey"],
    "description": "Cleaned part dimension table",
    "tags": ["dimension", "tpch", "cleaned"],
    "expectations_drop_row": {
      "valid_name": "p_name IS NOT NULL",
      "positive_size": "p_size > 0"
    },
    "expectations_warn": {
      "positive_retailprice": "p_retailprice > 0"
    },
    "expectations_fail_update": {
      "has_rows": "COUNT(*) > 0"
    }
  },
  {
    "source": "bronze.partsupp",
    "destination": "partsupp",
    "primary_keys": ["ps_partkey", "ps_suppkey"],
    "description": "Cleaned part supplier associative table",
    "tags": ["associative", "tpch", "cleaned"],
    "expectations_fail_update": {
      "positive_availqty": "ps_availqty >= 0",
      "positive_supplycost": "ps_supplycost > 0",
      "has_rows": "COUNT(*) > 0"
    }
  },
  {
    "source": "bronze.region",
    "destination": "region",
    "primary_keys": ["r_regionkey"],
    "description": "Cleaned region dimension table",
    "tags": ["dimension", "tpch", "cleaned"],
    "expectations_drop_row": {
      "valid_name": "r_name IS NOT NULL AND LENGTH(r_name) > 0"
    },
    "expectations_fail_update": {
      "valid_region": "r_name IN ('AFRICA', 'AMERICA', 'ASIA', 'EUROPE', 'MIDDLE EAST')",
      "has_rows": "COUNT(*) > 0"
    }
  },
  {
    "source": "bronze.supplier",
    "destination": "supplier",
    "primary_keys": ["s_suppkey"],
    "description": "Cleaned supplier dimension table",
    "tags": ["dimension", "tpch", "cleaned"],
    "expectations_drop_row": {
      "valid_name": "s_name IS NOT NULL",
      "valid_phone": "s_phone IS NOT NULL AND LENGTH(s_phone) > 0"
    },
    "expectations_warn": {
      "valid_acctbal": "s_acctbal IS NOT NULL"
    },
    "expectations_fail_update": {
      "has_rows": "COUNT(*) > 0"
    }
  }
]
